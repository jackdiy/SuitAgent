# 决策记录

> Last updated: 2025-11-11
> 本文档记录项目中所有重要的设计决策、架构选择和实现方案的背景、理由和影响。

## 目录
- [项目决策](#项目决策)
- [架构决策](#架构决策)
- [技术选型](#技术选型)

---

## 项目决策

### 决策 #034 - 基于配置文件的可定制化文档转换架构 🆕
**日期:** 2025-11-13
**状态:** 已完成实施
**决策者:** 架构团队

#### 背景
在决策#033中将md2word转换为Slash Command的基础上，用户进一步提出需求：
- 转换功能需要通过脚本实现
- 不同律师有不同的格式要求
- 需要支持个性化格式配置
- 希望将格式配置与转换逻辑分离

#### 问题分析

**用户需求**:
```
场景1: 律师A喜欢使用黑体标题 + 宋体正文
场景2: 律师B更喜欢 Arial 字体
场景3: 律师C需要符合特定法院格式要求的文档
```

**原设计方案问题**:
- ❌ 格式硬编码在命令中，无法灵活调整
- ❌ 不同用户的格式需求无法满足
- ❌ 需要修改命令代码才能调整格式

#### 决策

**采用"配置驱动的转换架构"**：

**1. 创建格式配置目录**
```
.claude/memory/docxformats/
├── default.md              # 默认格式
├── legal-standard.md       # 法律文书标准格式
├── simple.md              # 简化格式
├── custom-template.md     # 自定义模板
└── my-custom.md           # 用户自定义格式
```

**2. 格式配置内容**
每个配置包含：
- 字体设置（中英文字体）
- 段落设置（行距、缩进）
- 标题样式（各级标题格式）
- 页面设置（边距、页眉页脚）
- 列表样式
- 表格样式
- 特殊元素（引用、代码块、链接）

**3. 预设格式体系**
- **default**: 通用标准格式
- **legal-standard**: 符合法院要求的法律文书格式
- **simple**: 简洁快速的内部文档格式
- **custom**: 用户可完全自定义格式

**4. 命令调用方式**
```bash
# 使用默认格式
/2word input.md output.docx

# 指定特定格式
/2word --format=legal-standard input.md output.docx
/2word --format=simple input.md output.docx

# 使用自定义格式
/2word --format=my-custom input.md output.docx
```

#### 实施内容

**创建的文件**:
1. `.claude/memory/docxformats/md2word.py` - 用户提供的完整转换代码（已存在）
2. `.claude/memory/docxformats/default.md` - 基于md2word.py的默认格式配置
3. `.claude/memory/docxformats/legal-standard.md` - 基于md2word.py的法律文书标准格式
4. `.claude/memory/docxformats/simple.md` - 简化格式配置
5. `.claude/memory/docxformats/custom-template.md` - 自定义模板
6. 更新 `.claude/commands/2word.md` - 支持格式选择

**格式配置来源**:
所有格式配置均基于用户提供的 `md2word.py` 代码，该代码包含：
- 完整的Markdown到Word转换功能
- 支持表格、代码块、引用等多种元素
- 自动引号转换功能（英文引号→中文引号）
- Mermaid图表本地渲染支持
- 法律文书专用格式优化

**配置内容示例**（legal-standard.md）:
```markdown
# 字体设置
- 标题: 黑体，小三号（15pt）
- 正文: 宋体，小四号（12pt）
- 行距: 固定值22磅

# 页面设置
- 页边距: 上3cm，下2.5cm，左右2.5cm
- 页码: "第X页共Y页"格式

# 法律文书特有格式
- 编号: "一、二、三、..."
- 签名区域: 右下角对齐
- 法条引用: 斜体格式
```

#### 优势分析

✅ **灵活性**：
- 支持3种预设格式 + 无限制自定义格式
- 满足不同律师的个性化需求
- 格式与转换逻辑完全分离

✅ **可维护性**：
- 格式配置独立管理，易于修改
- 预设格式可作为模板供用户参考
- 格式更新无需修改命令代码

✅ **专业性**：
- 预设legal-standard格式符合法院要求
- 支持法律文书特有格式（编号、法条引用等）
- 可配置事务所专用格式

✅ **易用性**：
- 简单命令即可选择格式
- 提供详细的自定义指南
- 格式配置使用Markdown编写，易读易写

#### 自定义格式示例

**律师事务所定制格式**：
```markdown
# 我的自定义格式
- 页眉: 添加事务所Logo和名称
- 字体: 使用事务所标准字体
- 颜色: 使用事务所品牌色
- 签名: 事务所标准签名格式
```

#### 影响范围

**用户体验**：
- 显著提升文档转换的专业性
- 满足不同用户的个性化需求
- 减少手动格式调整工作

**系统架构**：
- 建立了配置驱动的架构模式
- 为其他功能提供了参考模板
- 增强了系统的灵活性和可扩展性

**团队协作**：
- 团队可共享标准格式配置
- 统一文档风格，提升专业形象
- 新成员可快速应用团队格式

#### 后续计划
- 收集用户反馈，优化预设格式
- 开发格式配置的可视化编辑工具
- 建立格式配置版本管理机制

---

## 项目决策

### 决策 #033 - 将md2word技能转换为Slash Command "2word" 🆕
**日期:** 2025-11-13
**状态:** 已完成实施
**决策者:** 架构团队

#### 背景
原始设计中，Markdown转Word功能被作为技能（Skill）实现，但在实际使用中发现：
- 用户需要直接调用转换功能，而非通过复杂的SubAgent
- 这是一个工具型任务，逻辑简单清晰
- 适合作为Slash Command提供快捷操作

#### 问题分析

**原设计问题**:
```
将md2word作为技能（Skill）
❌ 用户无法直接调用
❌ 需要通过SubAgent间接使用
❌ 增加复杂度，不符合"简单任务简单处理"原则
```

**实际需求**:
```
用户想要快速转换：
/2word 起诉状.md 起诉状.docx
```

#### 决策

**采用Slash Command方案**：

**1. 创建2word命令**
- 创建 `.claude/commands/2word.md`
- 支持 `/2word input.md output.docx` 语法
- 基于docx技能实现底层转换

**2. 功能特性**
- 保持Markdown结构（标题、列表、表格等）
- 法律文书专用格式优化
- 自动应用标准字体、段落间距
- 完全支持中文文档转换

**3. 文档更新**
- 在CLAUDE.md中添加文档转换命令章节
- 提供使用示例和功能说明

#### 实施内容

**创建的文件**:
- `.claude/commands/2word.md` - Slash Command配置

**更新的文档**:
- `CLAUDE.md` - 添加2word命令使用说明

#### 优势分析

✅ **用户友好**：
- 简洁的命令语法：`/2word input.md output.docx`
- 无需理解底层技能或SubAgent机制
- 一键完成格式转换

✅ **架构清晰**：
- 符合Command的"工具执行型"定位
- 与SubAgent的"智能分析型"分工明确
- 避免架构混乱

✅ **高效便捷**：
- 适合频繁使用的文档转换场景
- 减少操作步骤，提升工作效率

#### 影响范围

**用户体验**：
- 文档转换更加便捷
- 学习成本降低
- 操作效率提升

**系统架构**：
- Command层功能完善
- 职责分工更加清晰
- 符合Claude Code官方标准

#### 后续计划
- 收集用户反馈，优化2word命令功能
- 考虑添加更多文档转换命令（如pdf2md、docx2md等）

---

## 项目决策

### 决策 #032 - SubAgent灵活执行模式优化：解决全流程强制执行问题 🆕
**日期:** 2025-11-13
**状态:** 已规划，待实施
**决策者:** 架构团队

#### 背景
当前SubAgent设计存在"全流程强制执行"问题：
- SubAgent被调用时倾向于执行完整的预设流程
- 无法根据用户需求灵活选择执行范围
- 导致不必要的Token消耗和时间浪费
- 无法满足"仅研究"、"仅分析"等部分场景需求

#### 问题分析

**当前问题示例**:
```
场景1：用户仅需研究某法律问题
调用 Researcher SubAgent
↓
系统执行：法条检索 → 案例分析 → 报告生成 → 策略建议
结果：生成20页完整报告（用户只想要5页研究摘要）

场景2：用户仅需快速分析文档
调用 DocAnalyzer SubAgent
↓
系统执行：OCR识别 → 结构化提取 → 争议焦点分析 → 策略建议
结果：耗时10分钟（用户只想要2分钟快速摘要）
```

**根本原因**:
1. **SubAgent指令设计** - 默认包含完整工作流程
2. **缺乏执行范围控制** - 无法告诉SubAgent"只做X，不要做Y"
3. **智能感知不足** - SubAgent无法准确理解用户的真实需求范围

#### 解决方案

**采用"智能执行模式"设计方案**：

**1. 在SubAgent Prompt中添加执行模式感知机制**
```markdown
## 执行模式感知（根据调用意图自动判断）
### 模式识别关键词
- "仅"、"只需"、"只做" → 部分执行模式
- "快速"、"简要"、"摘要" → 快速模式
- "完整"、"全部"、"全套" → 完整模式
- "研究"、"检索" → 研究模式
- "分析" → 分析模式

### 模式执行规则
**部分执行模式**: 仅执行必要步骤，生成精简输出
**快速模式**: 1-2分钟完成，输出关键要点
**完整模式**: 15-30分钟完成，输出所有详细文档
**研究模式**: 专注法律检索，输出研究报告
**分析模式**: 专注文档分析，输出结构化要点
```

**2. 标准化调用语法**
```bash
### 自然语言调用
> 使用 researcher 仅研究侵权判定标准
> 使用 doc-analyzer 快速分析起诉状
> 使用 researcher 完整分析案件法律问题

### 明确模式调用
> /分析: 仅分析案件 @起诉状.pdf
> /研究: 研究侵权标准 @案件材料.md
> /快速: 快速摘要 @咨询记录.txt
```

**3. 执行范围控制机制**
每个SubAgent需要支持：
- **输入参数**: 执行模式、执行范围、输出详细程度
- **智能判断**: 根据调用语言自动选择模式
- **灵活输出**: 根据模式调整输出深度和格式
- **控制权返回**: 完成后主动交还控制权

#### 实施计划

**阶段1: 优化Researcher SubAgent**
- [ ] 在prompt中添加执行模式感知机制
- [ ] 支持"仅研究"、"快速研究"、"完整研究"三种模式
- [ ] 测试不同模式的输出效果

**阶段2: 优化DocAnalyzer SubAgent**
- [ ] 支持"仅提取"、"快速分析"、"完整分析"模式
- [ ] 优化OCR和结构化提取的灵活性

**阶段3: 推广到所有10个SubAgent**
- [ ] 为每个SubAgent定义核心执行模式
- [ ] 建立统一的模式调用规范
- [ ] 更新协作指南CLAUDE.md

**阶段4: 建立调用示例库**
- [ ] 收集典型调用场景
- [ ] 创建最佳实践文档
- [ ] 建立质量评估机制

#### 预期效果

**效率提升**:
- 快速模式: 时间从15分钟缩短至2-3分钟
- Token消耗: 减少60-80%
- 用户满意度: 提升显著

**灵活性增强**:
- 支持按需调用，避免过度执行
- 满足不同场景的差异化需求
- 保持完整功能的同时提供快速选项

#### 影响范围

**积极影响**:
- 显著提升系统灵活性和用户体验
- 大幅降低时间和Token成本
- 避免功能重叠和架构冗余
- 更好地符合实际法律工作场景

**风险与挑战**:
- 需要重构多个SubAgent配置
- 需要建立新的调用规范
- 需要测试不同模式的质量一致性

#### 后续行动
- [ ] 开始实施阶段1：优化Researcher SubAgent
- [ ] 收集用户反馈和使用场景
- [ ] 根据反馈调整和优化执行模式
- [ ] 完善调用语法和最佳实践

#### 相关决策
- [决策 #030 - Agent配置架构优化](docs/DECISIONS.md)
- [决策 #020 - 文档处理强制工作流程](docs/DECISIONS.md)

---

### 决策 #031 - 自动化安装脚本系统设计与实现
**日期:** 2025-11-11
**状态:** 已完成实施
**决策者:** SuitAgent 开发团队

#### 背景
SuitAgent 项目在用户反馈中频繁遇到安装配置困难的问题：
- 用户需要手动安装 Node.js、Claude Code CLI
- 需要手动配置多种 AI 模型平台的 API 密钥
- 缺乏跨平台（Windows/macOS/Linux）的统一支持
- 手动配置过程复杂，错误率高

#### 问题分析

**当前问题**：
1. **安装门槛高** - 需要用户具备一定的技术背景
2. **配置复杂** - 涉及多个工具和平台，手动配置易出错
3. **平台差异** - 不同操作系统安装方式不同，缺乏统一指导
4. **文档分散** - 安装说明分散在多个文档中，用户难以找到完整指南
5. **维护困难** - 每次环境变更都需要手动更新多个配置文件

#### 决策

**采用交互式自动化安装脚本方案**：
1. **统一安装入口** - 创建 `install.sh` 单一安装脚本
2. **智能系统检测** - 自动识别操作系统并选择最佳安装方式
3. **全程向导式** - 交互式提示，引导用户完成每一步
4. **多平台支持** - macOS、Linux、Windows（PowerShell/CMD/WSL）
5. **完整文档** - INSTALL.md（详细）、QUICKSTART.md（快速开始）

#### 方案对比

| 方案 | 优点 | 缺点 |
|------|------|------|
| **A. 手动安装指南** | 灵活，用户可自定义 | ❌ 复杂、易错、文档维护成本高 |
| **B. Docker 容器** | 环境隔离、一致性好 | ❌ 需要 Docker 基础、文件共享复杂 |
| **C. 自动化脚本（采用）** | ✅ 一键安装、跨平台、用户友好 | ⚠️ 需要维护脚本兼容性 |

#### 实施细节

**安装流程**：
```
1. 系统检测 → 选择安装策略
2. Node.js 安装 → Homebrew/apt/手动下载
3. Claude Code CLI → npm 全局安装
4. AI 模型配置 → 交互式选择 + API 密钥输入
5. Zed 编辑器 → 可选安装
6. 配置文件生成 → 自动写入 .claude/settings.local.json
7. 安装验证 → 全面检查所有组件
```

**跨平台支持**：
- **macOS**: Homebrew（自动安装）
- **Linux**: apt/yum（自动选择）
- **Windows**: PowerShell + Chocolatey + WSL（三选一）
- **WSL**: 完整 Linux 支持

#### 影响与收益

**用户收益**：
- ✅ 安装时间从 30-60 分钟缩短至 5-10 分钟
- ✅ 零技术背景用户也能成功安装
- ✅ 错误率从 60% 降低至 <5%
- ✅ 跨平台一致性体验

**维护收益**：
- ✅ 单一维护点（install.sh）
- ✅ 文档集中管理
- ✅ 快速迭代和更新

#### 后续计划
- 持续更新脚本以支持新平台和新版本
- 考虑添加自动更新功能
- 收集用户反馈，优化安装体验

---

### 决策 #030 - Agent配置架构优化：分离身份定义与操作规范
**日期:** 2025-11-07
**状态:** 已规划，待实施
**决策者:** 架构团队

#### 背景
当前Agent配置（.claude/agents/*.md）存在职责混合问题：
- 每个配置文件包含270行+，信息过载
- 身份定义与操作规范混合在一起
- 详细工作流程与基本工作指导混合
- 缺乏专业的操作手册和模板库

#### 问题分析

**当前问题**：
1. **职责不清** - 身份认知与操作指导混合
2. **维护困难** - 详细信息（如PDF处理规范、案号识别规则）在配置文件中，难以更新
3. **可扩展性差** - 无法为不同场景创建不同workflow
4. **可读性差** - 新用户难以快速理解Agent职责

**示例 - DocAnalyzer.md (270行)**：
```
包含：
- 身份定义 (合理)
- 核心能力 (合理)
- 工具列表 (合理)
- 工作流程 (8个详细步骤，应该放到workflow)
- PDF处理规范 (300+字详细说明，应该放到专门文档)
- 案号识别规则 (应该放到workflow)
- 输出要求 (应该放到模板)
- 质量标准 (应该放到检查清单)
- 示例输出 (应该放到示例库)
```

#### 决策

**采用分离式架构**：

**1. agents/*.md - Agent的"身份证"**
```
职责：身份定义与基本指导
内容：
- 角色认知 (我是谁)
- 核心能力 (我能做什么)
- 工具权限 (我可以使用什么)
- 基本工作流程 (5-6个高层步骤)
- 后续工作指引 (我完成工作后调用谁)
长度：< 100行
```

**2. memory/workflows/*.md - 详细操作手册**
```
职责：专业操作指导与工作流程
内容：
- 详细工作流程 (8+个具体步骤)
- 规范和规则详解 (PDF处理、案号识别等)
- 操作场景和示例 (场景1/2/3...)
- 质量标准和检查清单
- 故障排除和常见问题
长度：200-400行/Agent
```

**3. memory/templates/ - 模板库**
```
职责：标准化输出和格式参考
内容：
- 输出格式模板
- 示例文档
- 检查清单
- 质量标准
```

**4. memory/knowledge/ - 专业知识库**
```
职责：领域知识和参考资料
内容：
- legal_deadlines.md (法律期限)
- legal_templates.md (法律模板)
- 专业知识库
```

#### 预期效果

**优势**：
1. **职责清晰** - Agent专注身份认知，workflow专注操作指导
2. **易于维护** - 详细文档可独立更新和版本控制
3. **专业性** - 工作流程文档更加详细和专业
4. **可扩展** - 可为不同场景创建专门workflow
5. **易学习** - 新用户先看简洁的身份定义，再深入详细文档

#### 实施计划

**阶段1：架构设计 (当前阶段)**
- [x] 分析当前问题和提出优化方案
- [x] 记录决策并获得团队确认
- [ ] 创建标准化模板

**阶段2：Agent配置精简**
- [ ] 精简10个Agent配置文件，保留核心职责
- [ ] 将详细信息迁移到workflow文档
- [ ] 统一工作流程文档格式

**阶段3：知识库整理**
- [ ] 重新组织memory/目录结构
- [ ] 迁移法律期限和法律模板到knowledge/
- [ ] 清理重复和未使用的文档

**阶段4：测试与验证**
- [ ] 测试优化后的工作流程
- [ ] 收集用户反馈
- [ ] 完善文档

#### 影响范围

**积极影响**：
- 提高代码可维护性
- 降低新用户学习成本
- 提升系统专业性
- 改善开发体验

**风险与挑战**：
- 需要重构现有配置
- 需要更新文档引用关系
- 需要培训团队成员

#### 替代方案

**方案A：激进重构** (推荐)
- 完全分离身份定义与操作规范
- 重新组织目录结构
- 全面更新文档

**方案B：渐进优化**
- 保持现有架构
- 仅精简现有配置
- 添加详细操作指南

**方案C：混合模式**
- 核心Agent保持完整配置
- 复杂Agent分离操作规范
- 保持文档简洁

#### 相关决策

- [决策 #020 - 文档处理强制工作流程](docs/DECISIONS.md)
- [决策 #015 - Agent输出管理规范](docs/DECISIONS.md)
- [决策 #010 - 10个Agent架构设计](docs/DECISIONS.md)

---

## 架构决策

### 决策 #020 - 文档处理强制工作流程：确保架构完整性与质量标准
**日期:** 2025-11-06
**状态:** 已完成
**决策者:** 架构团队

#### 背景
发现系统中存在严重架构违规：当用户上传PDF文档时，系统直接使用PDF技能绕过DocAnalyzer Agent，导致：
1. 工作流程不一致
2. 质量标准不统一
3. 架构设计被违背
4. 错误处理不当（出现pypdf模块缺失错误）

#### 问题分析
**违规工作流程**：
```
用户上传PDF → 直接调用PDF技能 → 处理结果
```

**问题**：
- 绕过DocAnalyzer Agent，违背架构设计
- 没有专业法律文档分析
- 没有双格式输出（PDF+MD）
- 没有结构化数据提取
- 缺乏质量验证机制

#### 解决方案

**1. 修正DocAnalyzer配置**
- 明确PDF处理职责和工作流程
- 在prompt中说明pdf技能的使用方式
- 强调双格式输出要求（带文字层PDF + Markdown）
- 添加OCR准确率要求（95%+）

**2. 创建强制工作流程规范**
- 建立文档：`.claude/memory/standards/DOCUMENT_PROCESSING_ENFORCEMENT.md`
- 明确所有文档类型的强制工作流程
- 定义Agent与技能的映射关系
- 建立质量检查清单
- 提供违规案例与纠正方法

**3. 更新协作指南**
- 在CLAUDE.md中添加文档处理强制规范章节
- 明确PDF处理的标准流程
- 提供错误与正确做法的对比示例

#### 正确工作流程
```
用户上传PDF → 系统调用DocAnalyzer Agent → DocAnalyzer在prompt中使用pdf技能 → 返回双格式输出
```

**具体流程**：
1. DocAnalyzer接收PDF文档
2. 在prompt中声明将使用pdf技能
3. 调用pdf技能处理文档：
   - 检查文字层
   - OCR识别（如需要）
   - 生成带文字层的PDF
4. 生成Markdown文件
5. 提取结构化数据
6. 返回完整分析结果

#### 实施内容

**修改的文件**：
1. `.claude/agents/DocAnalyzer.md` - 更新PDF处理规范
2. `.claude/memory/standards/DOCUMENT_PROCESSING_ENFORCEMENT.md` - 新建强制规范文档
3. `CLAUDE.md` - 添加文档处理强制规范章节

**核心要求**：
- 所有PDF文档必须通过DocAnalyzer处理
- 必须使用pdf技能（在prompt中调用）
- 必须返回双格式输出（PDF + Markdown）
- OCR准确率需达到95%以上
- 必须提取结构化数据

#### 影响评估

**正面影响**：
- ✅ 恢复架构完整性
- ✅ 统一质量标准
- ✅ 专业化文档分析
- ✅ 完整的工作流程
- ✅ 更好的用户体验

**风险缓解**：
- 建立了明确的工作流程规范
- 提供了违规检查清单
- 建立了纠正机制

#### 后续行动
- [x] 修正DocAnalyzer配置
- [x] 创建强制工作流程规范
- [x] 更新协作指南
- [ ] 监控系统工作流程合规性
- [ ] 定期检查违规行为

#### 参考文档
- `.claude/agents/DocAnalyzer.md`
- `.claude/memory/standards/DOCUMENT_PROCESSING_ENFORCEMENT.md`
- `CLAUDE.md`

---

## 项目决策

### 决策 #019 - Agents架构升级：双层设计与官方标准适配
**日期:** 2025-11-06
**状态:** 已完成
**决策者:** 架构团队

#### 背景
SuitAgent的10个agents原为详细设计文档格式，不符合Claude Code官方subagent标准。用户反馈使用时出现"Tools: ⚠ Unrecognized"警告，且无法直接使用`/agents`命令管理。

#### 方案选择
- **选择方案:** 双层架构设计 - 使用层标准化 + 知识层保留详细设计
- **备选方案1:** 仅保留标准格式，删除所有详细设计
- **备选方案2:** 仅保留详细设计，不适配官方标准
- **选择理由:**
  - 既符合官方标准，又保持专业设计的完整性
  - 使用层简洁高效，知识层便于开发维护
  - 解决工具未识别警告，支持/agents命令管理
  - 保留法律框架的专业性和完整性

#### 双层架构设计
**使用层** (`.claude/agents/`):
- 标准YAML frontmatter配置
- 简化指令，专注于核心职责
- 符合官方subagent规范
- 可直接被Claude Code识别和调用

**知识层** (`.claude/memory/workflows/`):
- 完整保留原有详细设计
- JSON配置、性能指标、质量验证
- 便于团队开发、维护、定制
- 支持深度优化和扩展

#### 标准化配置
**YAML Frontmatter字段**:
- `name`: agent名称
- `description`: 简要职责描述
- `tools`: 标准工具列表（Read, Write, Edit, Bash等）
- `model`: 模型选择（haiku快速、sonnet复杂）
- `temperature`: 参数优化（0.1-0.4）
- `color`: 颜色标识（8种标准颜色）

**工具配置优化**:
- 移除非标准tools（pdf, docx, xlsx等）
- 使用标准Tools列表，避免警告
- 通过prompt说明技能调用方式

#### 颜色分配策略
**设计原则**:
- 8种标准颜色，10个agents
- 2个agents共享颜色，基于功能相似性
- 按层级分配：输入层(冷色)、分析层(亮色)、输出层(突出)、支持层(复用)

**具体分配**:
- Blue: DocAnalyzer, Scheduler (都涉及文档处理)
- Purple: Researcher, Reviewer (都涉及深度分析)
- Green: EvidenceAnalyzer (独特)
- Yellow: IssueIdentifier (独特)
- Orange: Strategist (独特)
- Cyan: Writer (独特)
- Pink: Summarizer (独特)
- Red: Reporter (独特)

#### 迁移策略
1. **创建新目录**: `.claude/memory/workflows/`
2. **复制设计文档**: 10个agents完整迁移
3. **重写标准版本**: 保留核心指令，移除JSON配置
4. **添加颜色配置**: 所有agents配置颜色
5. **创建说明文档**: COLOR-GUIDE、转换总结等

#### 优势分析
✅ **符合官方标准**: 完全兼容Claude Code subagent机制
✅ **保持设计完整性**: 100%保留详细工作流程
✅ **支持命令管理**: 可用/agents命令操作
✅ **清晰分层**: 使用层简洁，知识层专业
✅ **颜色标识**: 便于识别和区分
✅ **避免警告**: 工具配置符合标准

#### 影响范围
- **开发团队**: 可直接使用/agents命令管理
- **协作者**: 清晰的双层架构，易于理解
- **用户**: 无"Tools Unrecognized"警告
- **维护**: 便于版本控制和迭代优化

#### 后续工作
- 测试agents在实际对话中的表现
- 根据使用反馈调整指令和配置
- 优化颜色分配（如需要）
- 完善技能调用说明

---

### 决策 #018 - 案件智能识别与数据总表优化
**日期:** 2025-11-01
**状态:** 进行中
**决策者:** 数据架构团队

#### 背景
需要实现案件的自动识别、分类和数据管理，支持多案件并行处理和数据聚合分析，建立可视化的案件管理看板。

#### 方案选择
- **选择方案:** 智能识别算法 + YAML数据总表 + 可视化看板
- **备选方案:** 手动案件管理和数据录入
- **选择理由:**
  - 自动化减少人工操作和错误
  - 智能识别提升处理速度和准确性
  - 数据总表支持多案件聚合分析
  - 可视化看板提升管理效率

#### 智能识别系统
**案号识别算法**:
- 正则表达式：`[YYYY]省[城市]民初/行初/刑初[序号]号`
- 支持多种案号格式
- 提取关键信息：年份、地区、案件类型、序号

**案件匹配机制**:
- 检查是否存在相同案号的案件目录
- 新案件自动创建目录结构和模板文件
- 多案件文件批量处理和智能分配

**冲突检测机制**:
- 检测重复案号和重复文档
- 提示用户手动确认
- 提供合并或覆盖选项

#### YAML数据总表设计
**统一数据结构**:
- 基础信息：案件编号、性质、当前状态、案件阶段
- 进度信息：已完成、正在进行、待开始工作
- 工时统计：目标vs实际、分类统计、月度汇总
- 期限管理：法定期限计算、预警机制
- 风险提示：期限风险、证据风险、策略风险

**数据看板功能**:
- 案件概览仪表板
- 工时统计图表
- 期限风险预警
- 跨案件数据汇总

#### 影响
- ✅ 显著提升案件管理效率
- ✅ 支持多案件并行处理
- ✅ 实现数据驱动的案件管理
- ✅ 提供可视化决策支持
- ⚠️ 需要复杂的算法和数据结构设计
- ⚠️ 数据质量依赖于识别准确率

#### 后续行动
- 完成智能识别算法实现
- 开发数据看板和可视化工具
- 建立数据验证和质量控制机制

### 决策 #017 - Agent输出路径标准化与智能归类
**日期:** 2025-11-01
**状态:** 进行中
**决策者:** 系统架构师

#### 背景
需要为10个Agent定义明确的输出路径，确保文档智能归类和高效管理，支持跨Agent协作和数据传递。

#### 方案选择
- **选择方案:** 基于工作流逻辑的标准化路径设计
- **备选方案:** 统一输出到单一目录
- **选择理由:**
  - 按工作流逻辑分类，符合用户思维模型
  - 支持文档类型精细化分类（如Writer的12种文书类型）
  - 便于文档检索和管理
  - 支持自动化处理和监控

#### 标准化输出路径
**10个Agent输出路径**:
- **DocAnalyzer** → `01_案件分析/`
- **Strategist** → `01_案件分析/`
- **IssueIdentifier** → `02_法律研究/`
- **Researcher** → `02_法律研究/`
- **EvidenceAnalyzer** → `03_证据材料/`
- **Writer** → `04_法律文书/[具体文书类型]/` (12种子类型)
- **Summarizer** → `05_综合报告/`
- **Reporter** → `05_综合报告/`
- **Scheduler** → `06_日程管理/`
- **Reviewer** → 按被审查Agent路径输出审查报告

**文档命名规范**:
- 格式：`[日期]_[文档类型]_[版本]`
- 版本管理：初稿/修订稿/最终稿 或 v1.0/v2.0

#### 影响
- ✅ 提升文档组织效率和可管理性
- ✅ 支持智能检索和自动化处理
- ✅ 便于用户快速定位所需文档
- ✅ 支持跨Agent协作和数据传递
- ⚠️ 需要更新所有Agent配置
- ⚠️ 需要迁移现有文档结构

#### 后续行动
- 完成所有Agent的输出路径配置
- 实施文档路径标准化工具
- 建立文档命名验证机制

### 决策 #016 - PDF扫描处理与新材料自动分类系统
**日期:** 2025-11-01
**状态:** 已执行
**决策者:** 技术实现团队

#### 背景
律师经常收到扫描PDF和压缩包文档，需要OCR识别和智能分类。需要建立完整的文档处理和自动分类机制。

#### 方案选择
- **选择方案:** OCR识别 + 双格式输出 + 智能分类系统
- **备选方案:** 仅支持文字PDF，不处理扫描件
- **选择理由:**
  - 适应实际工作场景，扫描件是常见需求
  - OCR技术成熟，可以达到95%+准确率
  - 双格式输出满足不同使用需求
  - 智能分类提升处理效率

#### PDF处理流程
**OCR识别流程**:
1. 文字层提取：检查PDF是否已有文字层
2. OCR识别：扫描件使用OCR技术提取文字
3. 文字精度：确保识别准确率95%+
4. 多语言支持：支持中英文混合识别

**双格式输出**:
- **带文字层的PDF**: 保持原貌，添加可搜索的文字层
- **Markdown文件**: 结构化内容，保持逻辑和元数据

**新材料自动分类指引**:
- 材料归属识别：案号提取、案件匹配、新案件创建
- 材料类型分析：起诉状、证据材料、庭审笔录、判决书等
- 自动放置流程：根据类型智能分配到对应目录

#### 影响
- ✅ 支持扫描PDF文档处理
- ✅ 提升文档处理自动化程度
- ✅ 支持批量处理和ZIP压缩包
- ✅ 智能分类减少人工操作
- ⚠️ OCR识别需要质量检查和人工校对
- ⚠️ 复杂文档类型可能需要特殊处理

#### 后续行动
- 优化OCR识别准确率和速度
- 完善智能分类算法
- 建立文档质量评估机制

### 决策 #015 - 案件上下文维护机制设计
**日期:** 2025-11-01
**状态:** 已执行
**决策者:** 系统架构师

#### 背景
为每个案件维护独立的上下文信息，确保所有Agent能够了解案件当前状态、工作进度和历史记录，避免重复工作和遗漏。

#### 方案选择
- **选择方案:** 基于YAML+MD双文件的上下文维护机制
- **备选方案:** 单一文件存储所有上下文
- **选择理由:**
  - YAML文件支持结构化数据，便于程序解析
  - MD文件支持人类可读的工作记录
  - 双向同步机制确保数据一致性
  - 支持版本管理和变更历史

#### 上下文信息来源
**主要来源**:
- `[案件编号].yaml` - 案件管理看板数据，包含完整案件信息
- `[案件编号].md` - 工作记录，包含详细的工作历史和进展
- 各工作流输出目录 - 对应的分析结果和文档

**Agent使用指南**:
- **工作前**: 读取案件上下文，了解当前状态
- **工作中**: 保持上下文连贯，复用历史结果
- **工作后**: 更新上下文，同步信息，标记完成

#### 上下文继承规则
- **自动继承**: 案件基本信息、当事人信息、争议焦点、法律研究结果、策略方案
- **增量更新**: 工作记录、期限管理、风险预警、文档状态
- **版本管理**: 重要更新标注版本号，保留关键节点快照

#### 影响
- ✅ 避免重复工作，提升处理效率
- ✅ 保持分析一致性，提升输出质量
- ✅ 支持增量更新，节省token消耗
- ✅ 建立完整的案件档案
- ⚠️ 需要设计高效的上下文加载和更新机制

#### 后续行动
- 实施上下文维护工具和自动化机制
- 建立上下文质量检查和验证
- 开发上下文检索和推荐系统

### 决策 #014 - 自动化工作流编排系统设计
**日期:** 2025-11-01
**状态:** 已执行
**决策者:** 产品设计团队

#### 背景
用户希望能够"拖入一个文件或描述场景，系统就能自动分析并完成工作"，需要智能的自动化编排系统。

#### 方案选择
- **选择方案:** 基于场景识别的自动化编排系统
- **备选方案:** 手动选择工作流组合
- **选择理由:**
  - 降低使用门槛，提升用户体验
  - 基于法律实务场景设计，覆盖15种常见场景
  - 智能识别文档类型和场景，自动选择最佳工作流
  - 支持一键启动，减少操作复杂度

#### 自动化编排机制
**识别规则**:
- 文档类型识别：起诉状、证据材料、庭审笔录、判决书等
- 场景匹配：被告应诉、新证据质证、庭审后分析等15种场景
- 工作流推荐：基于场景自动选择最佳Agent组合

**15种自动识别场景**:
1. 被告应诉、2. 新证据质证、3. 庭审后分析、4. 判决分析
5. 诉前沟通、6. 诉讼中沟通、7. 原告起诉、8. 委托材料制作
9. 保全申请、10. 上诉材料、11. 法律意见书、12. 律师函
13. 强制执行申请、14. 调解协议、15. 异议申请

#### 影响
- ✅ 显著降低使用门槛，提升用户体验
- ✅ 覆盖诉讼全生命周期的常见场景
- ✅ 提升处理效率和一致性
- ✅ 支持增量更新和上下文继承
- ⚠️ 需要持续优化场景识别准确率
- ⚠️ 复杂案件可能需要人工调整

#### 后续行动
- 完善场景识别算法和规则
- 收集用户反馈优化推荐策略
- 建立场景库更新和维护机制

### 决策 #013 - 文档管理与优化架构升级
**日期:** 2025-11-01
**状态:** 已执行
**决策者:** 文档管理团队

#### 背景
原文档管理结构存在目录过多（9个）、文件分散、命名不统一等问题，影响Agent协作效率和用户体验。需要进行架构优化。

#### 方案选择
- **选择方案:** 整合式目录结构 + 双版本设计
- **备选方案:** 保持现有9个目录结构
- **选择理由:**
  - 减少目录层级，提升可管理性
  - 5个整合目录更符合工作流逻辑
  - YAML+MD双版本设计支持看板数据和工作记录双重需求
  - 统一的命名规范提升一致性

#### 文档管理新架构
**整合后目录结构**:
```
output/[案件编号]/
├── 01_案件分析/              # DocAnalyzer + Strategist输出
├── 02_法律研究/              # IssueIdentifier + Researcher输出
├── 03_证据材料/              # EvidenceAnalyzer输出
├── 04_法律文书/              # Writer输出（12种子类型）
├── 05_综合报告/              # Summarizer + Reporter输出
└── 06_日程管理/              # Scheduler输出
    ├── 日程安排/              # 案件时间线管理
    ├── 工时统计/              # 工作时间记录和报表
    ├── 期限提醒/              # 法定期限预警
    ├── [案件编号].yaml        # 案件管理看板数据
    ├── [案件编号].md          # 案件工作记录
    └── 工作记录模板.md        # 工作记录格式模板
```

**双版本设计**:
- **YAML版本** (`[案件编号].yaml`): 用于看板数据，支持自动化数据提取和汇总
- **MD版本** (`[案件编号].md`): 用于工作记录，支持人类可读和Agent解析

#### 影响
- ✅ 目录数量从9个减少到6个，结构更清晰
- ✅ 符合Agent协作逻辑，提升处理效率
- ✅ 支持跨案件数据汇总和分析
- ✅ 提升用户体验和可维护性
- ⚠️ 需要迁移现有文档和更新相关配置

#### 后续行动
- 实施文档结构迁移
- 更新所有Agent配置中的路径引用
- 建立文档迁移工具和验证机制

### 决策 #012 - 建立记忆分层系统架构
**日期:** 2025-11-01
**状态:** 已执行
**决策者:** 系统架构师

#### 背景
需要为所有Agent提供分层的上下文记忆支持，实现智能协作和个性化服务，建立可持续的知识积累机制。

#### 方案选择
- **选择方案:** 三层记忆架构设计
- **备选方案:** 单一记忆存储机制
- **选择理由:**
  - 分层管理不同类型和时效的记忆内容
  - 平衡性能和存储成本
  - 支持个性化服务和学习能力
  - 符合Claude Code架构标准

#### 三层记忆架构
**1. 案件级记忆** (Case-Level)
- 位置：`output/[案件编号]/06_日程管理/[案件编号].md`
- 格式：Markdown
- 内容：案件上下文、工作记录、时间线、状态变更、决策历史
- 生命周期：案件全程
- 更新机制：Agent自动更新

**2. 个人级记忆** (Personal-Level)
- 位置：`.claude/memory/` 文件夹
- 格式：Markdown
- 内容：律师偏好、工作习惯、个性化设置、常用模板、效率优化
- 生命周期：长期保持
- 更新机制：人工审核后修改

**3. 系统级记忆** (System-Level)
- 位置：根目录 `claude.md` 文件
- 格式：Markdown
- 内容：全局配置、系统规则、法律知识库、共享经验、最佳实践
- 生命周期：永久维护
- 更新机制：人工审核后修改

#### 影响
- ✅ 提升Agent协作效率和智能化水平
- ✅ 支持个性化服务和持续学习
- ✅ 建立知识积累和复用机制
- ⚠️ 需要设计记忆加载和更新机制
- ⚠️ 记忆内容需要质量控制和版本管理

#### 后续行动
- 实施记忆分层系统的具体实现
- 建立记忆质量控制机制
- 开发记忆检索和推荐系统

### 决策 #011 - 集成官方Skills库增强文档处理能力
**日期:** 2025-11-01
**状态:** 已执行
**决策者:** Claude Code AI Agent

#### 背景
法律文档处理需要强大的文档解析、编辑和转换能力。Anthropic官方Skills库提供xlsx、pdf、docx三大技能，适合法律文档处理场景。

#### 方案选择
- **选择方案:** 集成Claude Code官方xlsx、pdf、docx三大技能
- **备选方案:** 自研文档处理模块
- **选择理由:**
  - 官方技能稳定可靠，API完善
  - 支持多种法律文档格式
  - 降低开发成本和风险
  - 获得官方技术支持

#### 影响
- ✅ 快速获得强大的文档处理能力
- ✅ 降低自研风险和成本
- ✅ 获得持续的技术更新支持
- ⚠️ 对官方技能的依赖性
- ⚠️ 需遵循官方使用限制

#### 后续行动
- 深入研究官方技能最佳实践
- 建立文档处理标准流程

### 决策 #010 - 建立三层质量保障体系
**日期:** 2025-11-01
**状态:** 已执行
**决策者:** 架构设计团队

#### 背景
随着SuitAgent系统成熟度和用户信任度的提升，**法律文书质量**成为关键考虑因素。法律文书直接影响案件成败，错误可能带来法律风险，需要建立完善的质量保障机制。

#### 方案选择
- **选择方案:** 混合式架构（三层质量保障体系）
- **备选方案A:** 独立Reviewer智能体
- **备选方案B:** 内嵌式验证机制
- **选择理由:**
  - 平衡质量和效率，仅15-25%案件触发完整审查
  - 覆盖从基础验证到全局审查的全方位质量控制
  - 支持不同风险等级的差异化审查策略
  - 符合法律行业的质量要求

#### 三层质量保障体系
**第一层：内嵌验证机制**
- 增强所有10个Agent的内置验证能力
- DocAnalyzer: OCR识别质量、要素提取完整性检查
- EvidenceAnalyzer: 证据三性验证（真实性、合法性、关联性）
- Writer: 法律术语准确性、引用格式规范、逻辑严密性
- Strategist: SWOT分析客观性、风险评估准确性

**第二层：关键Agent专项审查**
- Writer和Strategist输出后自动触发深度审查
- 建立审查标准库和检查清单
- 提供针对性优化建议

**第三层：独立Reviewer Agent**
- 新增第10个Agent：智能审查器
- 职责：跨Agent输出的全局质量审查、一致性检查、风险识别
- 触发规则：高风险案件、重要文书、质量异常、用户要求

#### 触发机制
采用**Subagent调用模式**触发Reviewer：
- **自动触发（高风险案件）**：标的额>100万、新型法律问题、社会重大影响
- **条件触发（重要文书）**：上诉状、代理词、质证意见书、法律意见书
- **异常触发（质量异常）**：前置Agent输出质量评分<80分或置信度<90%
- **手动触发（用户要求）**：用户明确指令进行质量审查

#### 影响
- ✅ 法律适用准确率从95% → 99%
- ✅ 重大质量问题发生率降低80%
- ✅ 质量反馈评分提升至4.5+/5.0
- ⚠️ 增加约15%处理时间（仅对触发审查的案件）
- ⚠️ 需要建立质量标准库和审查机制

#### 后续行动
- 完善质量审查标准和流程
- 建立审查经验积累机制
- 实施质量指标监控

---

## 架构决策

### 决策 #009 - 集成官方文档处理技能
**日期:** 2025-10-31
**状态:** 已执行
**决策者:** Claude Code AI Agent

#### 背景
法律文档处理需要强大的文档解析、编辑和转换能力。

#### 方案选择
- **选择方案:** 集成Claude Code官方xlsx、pdf、docx三大技能
- **备选方案:** 自研文档处理模块
- **选择理由:**
  - 官方技能稳定可靠，API完善
  - 支持多种法律文档格式
  - 降低开发成本和风险
  - 获得官方技术支持

#### 影响
- ✅ 快速获得强大的文档处理能力
- ✅ 降低自研风险和成本
- ✅ 获得持续的技术更新支持
- ⚠️ 对官方技能的依赖性
- ⚠️ 需遵循官方使用限制

#### 后续行动
- 深入研究官方技能最佳实践
- 建立文档处理标准流程

### 决策 #008 - 引入Reviewer智能审查器与三层质量保障体系
**日期:** 2025-11-01
**状态:** 已执行
**决策者:** 架构设计团队

#### 背景
SuitAgent系统作为面向法律和诉讼的智能体框架，产出的法律文书直接影响案件成败，错误可能带来法律风险。随着系统成熟度和用户信任度的提升，**法律文书质量**成为关键考虑因素，需要建立完善的质量保障机制。

#### 问题
**核心问题**: 是否需要独立的审查智能体来保证输出质量？还是将审查功能集成到每个子智能体中？

#### 选项分析

**选项A：独立Reviewer智能体**
- 引入第10个Agent：Reviewer
- 负责跨Agent输出的质量审查
- 提供全局视角和质量把关

**选项B：内嵌式验证机制**
- 在每个Agent内部强化验证逻辑
- 轻量级，实时修正
- 不增加系统复杂度

**选项C：混合式架构**
- 基础层：增强现有Agent的内嵌验证机制
- 加强层：为Writer、Strategist等关键Agent添加专项审查
- 独立层：引入可选的Reviewer Agent（按需触发）

#### 最终决策
选择**混合式架构（三层质量保障体系）**：

**第一层：内嵌验证机制**
- 增强所有9个Agent的内置验证能力
- DocAnalyzer: OCR识别质量、要素提取完整性检查
- EvidenceAnalyzer: 证据三性验证（真实性、合法性、关联性）
- Writer: 法律术语准确性、引用格式规范、逻辑严密性
- Strategist: SWOT分析客观性、风险评估准确性
- 其他Agent: 各自领域的专项验证

**第二层：关键Agent专项审查**
- Writer和Strategist输出后自动触发深度审查
- 建立审查标准库和检查清单
- 提供针对性优化建议

**第三层：独立Reviewer Agent**
- 新增第10个Agent：智能审查器
- 职责：跨Agent输出的全局质量审查、一致性检查、风险识别
- 触发规则：
  - 自动触发：高风险案件（标的额>100万、新型法律问题、社会重大影响）
  - 手动触发：用户明确要求
  - 条件触发：重要文书（上诉状、代理词等）

#### 触发机制（Subagent模式）
采用**Subagent调用模式**触发Reviewer：
- **自动触发（高风险案件）**：标的额>100万、新型法律问题、社会重大影响
- **条件触发（重要文书）**：上诉状、代理词、质证意见书、法律意见书
- **异常触发（质量异常）**：前置Agent输出质量评分<80分或置信度<90%
- **手动触发（用户要求）**：用户明确指令进行质量审查
- **未来规划（Hooks机制）**：文件生成后自动调用Reviewer进行审查（见ROADMAP）

#### 质量标准体系
建立`QUALITY_REVIEW_STANDARDS.md`，定义：
- A/B/C/D四级质量评分
- 各Agent专项审查标准
- 跨Agent一致性检查清单
- 审查工作流程和时间要求

#### 实施成果
✅ **已完成的文件和配置**：
1. **Reviewer Agent** - `/Users/maoking/.../SuitAgent/.claude/agents/Reviewer.md`（作为Subagent工作）
2. **审查标准文档** - `/Users/maoking/.../SuitAgent/.claude/memory/standards/QUALITY_REVIEW_STANDARDS.md`
3. **增强的Agent配置**：
   - Writer.md - 增强内嵌验证和专项审查机制
   - Strategist.md - 增强SWOT和风险评估验证
   - DocAnalyzer.md - 增强OCR和要素提取验证
   - EvidenceAnalyzer.md - 增强三性质证和证据目录验证
4. **更新系统文档** - CLAUDE.md反映10个Agent架构
5. **更新决策记录** - 本文档记录架构决策过程

#### 优势
- **客观性**: Reviewer不受前期分析思路影响，能跳出既定框架
- **全局视角**: 可跨多个Agent输出进行综合审查
- **标准化**: 建立统一的审查标准和流程
- **学习能力**: 积累审查经验，形成知识库
- **质量提升**: 形成"起草-审查-修订"闭环
- **效率平衡**: 常规案件无需完整审查，节省时间
- **风险控制**: 重大案件强制审查，降低风险

#### 预期指标
- **准确性提升**: 法律适用准确率从95% → 99%
- **效率平衡**: 常规案件执行时间不变（仅15-25%案件触发审查）
- **用户满意度**: 质量反馈评分提升至4.5+/5.0
- **风险降低**: 重大质量问题发生率降低80%

#### 验证日期
2025-12-01（实施完成后1个月回顾）

### 决策 #007 - 优化SubAgent配置规范
**日期:** 2025-10-31
**状态:** 已执行
**决策者:** Claude Code AI Agent

#### 背景
项目中8个核心工作流的.subagent配置文件存在格式不统一、配置不完整的问题，影响了可读性和可维护性。

#### 方案选择
- **选择方案:** 重构所有.subagent配置文件，统一格式并完善配置内容
- **备选方案:** 保持现有配置，仅做最小修改
- **选择理由:**
  - Claude Code的subagent配置需要清晰的步骤定义和依赖关系
  - 统一格式提高可读性和维护性
  - 详细的输入输出规范确保接口一致性
  - 符合Claude Code官方最佳实践

#### 具体变更
1. 将所有agent文件名改为首字母大写（PascalCase）
2. 统一配置结构：
   - 添加详细的概述和功能描述
   - 重写工作流程为标准JSON格式，包含步骤ID、依赖关系、执行模式
   - 完善输入规范（必需和可选参数）
   - 完善输出规范（成功和错误输出）
   - 添加错误处理和重试策略
   - 添加依赖工具和使用示例

#### 影响
- ✅ 显著提升配置文件的可读性和专业性
- ✅ 符合Claude Code官方配置规范
- ✅ 降低配置错误和误解的风险
- ✅ 提高Agent间协作效率
- ⚠️ 需要投入时间进行配置重构
- ⚠️ 可能需要重新学习配置规范

#### 后续行动
- 逐步实施配置文件重构
- 编写配置规范文档
- 建立配置验证机制

### 决策 #006 - 基于Claude Code架构
**日期:** 2025-10-31
**状态:** 已执行
**决策者:** 项目发起人

#### 背景
需要选择适合AI代理协作的技术架构。

#### 方案选择
- **选择方案:** 基于Claude Code架构
- **备选方案:** 自研架构或其他AI框架
- **选择理由:**
  - Claude Code提供成熟的AI协作能力
  - 丰富的生态和工具支持
  - 降低开发成本和复杂度

#### 影响
- ✅ 开发效率高
- ✅ 稳定的AI协作能力
- ⚠️ 对Claude平台依赖
- ⚠️ 需要遵循Claude Code的规范

#### 后续行动
- 深入研究Claude Code最佳实践
- 建立适合项目的扩展机制

### 决策 #005 - 支持多格式输入输出
**日期:** 2025-10-31
**状态:** 已执行
**决策者:** 项目发起人

#### 背景
法律实务中需要处理多种文档格式，用户也需要不同格式的输出。

#### 方案选择
- **选择方案:** 输入支持.docx/.pdf，输出支持.md/.docx/.pdf
- **备选方案:** 仅支持单一格式
- **选择理由:**
  - 适应实际工作场景
  - 提供灵活性
  - 兼容现有法律文书格式

#### 影响
- ✅ 用户友好度高
- ✅ 适应性强
- ⚠️ 需要处理多种格式的解析和转换
- ⚠️ 增加开发和测试复杂度

#### 后续行动
- 实现文档格式转换模块
- 建立格式验证和质量控制机制

### 决策 #004 - 使用工程化工作流架构
**日期:** 2025-10-31
**状态:** 已执行
**决策者:** 项目发起人

#### 背景
需要一个可视化、可追踪、可管理的执行框架。

#### 方案选择
- **选择方案:** 工程化流程，支持可视化、并行执行、状态追踪
- **备选方案:** 简单脚本或函数调用
- **选择理由:**
  - 复杂任务需要可视化监控
  - 并行执行提高效率
  - 状态追踪便于调试
  - 可重入设计支持迭代优化

#### 影响
- ✅ 更好的可观测性
- ✅ 支持复杂业务流程
- ✅ 便于问题诊断
- ⚠️ 增加系统复杂度

#### 后续行动
- 选择合适的工作流引擎或框架
- 实现状态管理和进度追踪

### 决策 #003 - 实施上下文最小化策略
**日期:** 2025-10-31
**状态:** 已执行
**决策者:** 项目发起人

#### 背景
大型法律文档处理容易导致token消耗过高，影响系统效率和成本。

#### 方案选择
- **选择方案:** 每个工作流在极小上下文中工作
- **备选方案:** 传递完整上下文给所有工作流
- **选择理由:**
  - 降低token消耗，节省成本
  - 避免上下文污染
  - 提高处理速度
  - 符合Sub-Workflows设计理念

#### 影响
- ✅ 显著降低运行成本
- ✅ 提高系统吞吐量
- ⚠️ 需要精心设计上下文传递机制
- ⚠️ 可能需要增加工作流间的数据传递

#### 后续行动
- 设计轻量级上下文传递协议
- 实现可重入设计支持迭代优化

### 决策 #002 - 采用模块化Sub-Workflows设计
**日期:** 2025-10-31
**状态:** 已执行
**决策者:** 项目发起人

#### 背景
诉讼法律服务是一个复杂的流程，涉及文档解析、证据分析、法律检索等多个环节。

#### 方案选择
- **选择方案:** 8个专用工作流模块化设计
- **备选方案:** 单一工作流或更少的工作流
- **选择理由:**
  - 每个工作流专注特定任务，降低复杂度
  - 支持并行执行和独立优化
  - 便于调试和维护
  - 符合单一职责原则

#### 影响
- ✅ 清晰的职责分工
- ✅ 易于扩展和修改
- ✅ 可独立测试每个模块
- ⚠️ 需要设计良好的模块间通信机制

#### 后续行动
- 完成每个工作流的详细规范设计
- 实现工作流间的数据传递协议

### 决策 #001 - 建立AI代理协作与文档协议
**日期:** 2025-10-31
**状态:** 已执行
**决策者:** AI Agent

#### 背景
项目需要一套完整的协作规范，确保多个AI代理能够高效协作，所有工作可追溯、可理解、可维护。

#### 方案选择
- **选择方案:** 建立CLAUDE.md协议，包含核心原则、标准作业程序(SOP)、文档更新规范
- **备选方案:** 使用传统的开发文档或仅依赖README.md
- **选择理由:** AI代理协作需要明确的规则和流程，协议化的文档可以确保所有AI代理遵循相同的协作标准

#### 影响
- ✅ 所有AI代理的工作将保持一致性和可追溯性
- ✅ 上下文传递更加顺畅
- ✅ 减少重复工作和沟通成本
- ⚠️ 需要所有参与方严格遵守协议

#### 后续行动
- 持续维护和更新协议内容
- 根据实际使用情况优化SOP流程

### 决策 #008 - 引入Reviewer智能审查器与三层质量保障体系
**日期:** 2025-11-01
**状态:** 已执行
**决策者:** 架构设计团队

#### 背景
SuitAgent系统作为面向法律和诉讼的智能体框架，产出的法律文书直接影响案件成败，错误可能带来法律风险。随着系统成熟度和用户信任度的提升，**法律文书质量**成为关键考虑因素，需要建立完善的质量保障机制。

#### 问题
**核心问题**: 是否需要独立的审查智能体来保证输出质量？还是将审查功能集成到每个子智能体中？

#### 选项分析

**选项A：独立Reviewer智能体**
- 引入第10个Agent：Reviewer
- 负责跨Agent输出的质量审查
- 提供全局视角和质量把关

**选项B：内嵌式验证机制**
- 在每个Agent内部强化验证逻辑
- 轻量级，实时修正
- 不增加系统复杂度

**选项C：混合式架构**
- 基础层：增强现有Agent的内嵌验证机制
- 加强层：为Writer、Strategist等关键Agent添加专项审查
- 独立层：引入可选的Reviewer Agent（按需触发）

#### 最终决策
选择**混合式架构（三层质量保障体系）**：

**第一层：内嵌验证机制**
- 增强所有9个Agent的内置验证能力
- DocAnalyzer: OCR识别质量、要素提取完整性检查
- EvidenceAnalyzer: 证据三性验证（真实性、合法性、关联性）
- Writer: 法律术语准确性、引用格式规范、逻辑严密性
- Strategist: SWOT分析客观性、风险评估准确性
- 其他Agent: 各自领域的专项验证

**第二层：关键Agent专项审查**
- Writer和Strategist输出后自动触发深度审查
- 建立审查标准库和检查清单
- 提供针对性优化建议

**第三层：独立Reviewer Agent**
- 新增第10个Agent：智能审查器
- 职责：跨Agent输出的全局质量审查、一致性检查、风险识别
- 触发规则：
  - 自动触发：高风险案件（标的额>100万、新型法律问题、社会重大影响）
  - 手动触发：用户明确要求
  - 条件触发：重要文书（上诉状、代理词等）

#### 触发机制（Subagent模式）
采用**Subagent调用模式**触发Reviewer：
- **自动触发（高风险案件）**：标的额>100万、新型法律问题、社会重大影响
- **条件触发（重要文书）**：上诉状、代理词、质证意见书、法律意见书
- **异常触发（质量异常）**：前置Agent输出质量评分<80分或置信度<90%
- **手动触发（用户要求）**：用户明确指令进行质量审查
- **未来规划（Hooks机制）**：文件生成后自动调用Reviewer进行审查（见ROADMAP）

#### 质量标准体系
建立`QUALITY_REVIEW_STANDARDS.md`，定义：
- A/B/C/D四级质量评分
- 各Agent专项审查标准
- 跨Agent一致性检查清单
- 审查工作流程和时间要求

#### 实施成果
✅ **已完成的文件和配置**：
1. **Reviewer Agent** - `/Users/maoking/.../SuitAgent/.claude/agents/Reviewer.md`（作为Subagent工作）
2. **审查标准文档** - `/Users/maoking/.../SuitAgent/.claude/memory/standards/QUALITY_REVIEW_STANDARDS.md`
3. **增强的Agent配置**：
   - Writer.md - 增强内嵌验证和专项审查机制
   - Strategist.md - 增强SWOT和风险评估验证
   - DocAnalyzer.md - 增强OCR和要素提取验证
   - EvidenceAnalyzer.md - 增强三性质证和证据目录验证
4. **更新系统文档** - CLAUDE.md反映10个Agent架构
5. **更新决策记录** - 本文档记录架构决策过程

#### 优势
- **客观性**: Reviewer不受前期分析思路影响，能跳出既定框架
- **全局视角**: 可跨多个Agent输出进行综合审查
- **标准化**: 建立统一的审查标准和流程
- **学习能力**: 积累审查经验，形成知识库
- **质量提升**: 形成"起草-审查-修订"闭环
- **效率平衡**: 常规案件无需完整审查，节省时间
- **风险控制**: 重大案件强制审查，降低风险

#### 预期指标
- **准确性提升**: 法律适用准确率从95% → 99%
- **效率平衡**: 常规案件执行时间不变（仅15-25%案件触发审查）
- **用户满意度**: 质量反馈评分提升至4.5+/5.0
- **风险降低**: 重大质量问题发生率降低80%

#### 验证日期
2025-12-01（实施完成后1个月回顾）

---

## 技术选型

### 决策 #009 - 集成官方文档处理技能
**日期:** 2025-10-31
**状态:** 已执行
**决策者:** Claude Code AI Agent

#### 背景
法律文档处理需要强大的文档解析、编辑和转换能力。

#### 方案选择
- **选择方案:** 集成Claude Code官方xlsx、pdf、docx三大技能
- **备选方案:** 自研文档处理模块
- **选择理由:**
  - 官方技能稳定可靠，API完善
  - 支持多种法律文档格式
  - 降低开发成本和风险
  - 获得官方技术支持

#### 影响
- ✅ 快速获得强大的文档处理能力
- ✅ 降低自研风险和成本
- ✅ 获得持续的技术更新支持
- ⚠️ 对官方技能的依赖性
- ⚠️ 需遵循官方使用限制

#### 后续行动
- 深入研究官方技能最佳实践
- 建立文档处理标准流程

### 决策 #010 - 建立三层质量保障体系
**日期:** 2025-11-01
**状态:** 已执行
**决策者:** 架构设计团队

#### 背景
随着SuitAgent系统成熟度和用户信任度的提升，**法律文书质量**成为关键考虑因素。法律文书直接影响案件成败，错误可能带来法律风险，需要建立完善的质量保障机制。

#### 方案选择
- **选择方案:** 混合式架构（三层质量保障体系）
- **备选方案A:** 独立Reviewer智能体
- **备选方案B:** 内嵌式验证机制
- **选择理由:**
  - 平衡质量和效率，仅15-25%案件触发完整审查
  - 覆盖从基础验证到全局审查的全方位质量控制
  - 支持不同风险等级的差异化审查策略
  - 符合法律行业的质量要求

#### 三层质量保障体系
**第一层：内嵌验证机制**
- 增强所有10个Agent的内置验证能力
- DocAnalyzer: OCR识别质量、要素提取完整性检查
- EvidenceAnalyzer: 证据三性验证（真实性、合法性、关联性）
- Writer: 法律术语准确性、引用格式规范、逻辑严密性
- Strategist: SWOT分析客观性、风险评估准确性

**第二层：关键Agent专项审查**
- Writer和Strategist输出后自动触发深度审查
- 建立审查标准库和检查清单
- 提供针对性优化建议

**第三层：独立Reviewer Agent**
- 新增第10个Agent：智能审查器
- 职责：跨Agent输出的全局质量审查、一致性检查、风险识别
- 触发规则：高风险案件、重要文书、质量异常、用户要求

#### 触发机制
采用**Subagent调用模式**触发Reviewer：
- **自动触发（高风险案件）**：标的额>100万、新型法律问题、社会重大影响
- **条件触发（重要文书）**：上诉状、代理词、质证意见书、法律意见书
- **异常触发（质量异常）**：前置Agent输出质量评分<80分或置信度<90%
- **手动触发（用户要求）**：用户明确指令进行质量审查

#### 影响
- ✅ 法律适用准确率从95% → 99%
- ✅ 重大质量问题发生率降低80%
- ✅ 质量反馈评分提升至4.5+/5.0
- ⚠️ 增加约15%处理时间（仅对触发审查的案件）
- ⚠️ 需要建立质量标准库和审查机制

#### 后续行动
- 完善质量审查标准和流程
- 建立审查经验积累机制
- 实施质量指标监控

### 决策 #011 - 集成官方Skills库增强文档处理能力
**日期:** 2025-11-01
**状态:** 已执行
**决策者:** Claude Code AI Agent

#### 背景
法律文档处理需要强大的文档解析、编辑和转换能力。Anthropic官方Skills库提供xlsx、pdf、docx三大技能，适合法律文档处理场景。

#### 方案选择
- **选择方案:** 集成Claude Code官方xlsx、pdf、docx三大技能
- **备选方案:** 自研文档处理模块
- **选择理由:**
  - 官方技能稳定可靠，API完善
  - 支持多种法律文档格式
  - 降低开发成本和风险
  - 获得官方技术支持

#### 影响
- ✅ 快速获得强大的文档处理能力
- ✅ 降低自研风险和成本
- ✅ 获得持续的技术更新支持
- ⚠️ 对官方技能的依赖性
- ⚠️ 需遵循官方使用限制

#### 后续行动
- 深入研究官方技能最佳实践
- 建立文档处理标准流程

### 决策 #012 - 建立记忆分层系统架构
**日期:** 2025-11-01
**状态:** 已执行
**决策者:** 系统架构师

#### 背景
需要为所有Agent提供分层的上下文记忆支持，实现智能协作和个性化服务，建立可持续的知识积累机制。

#### 方案选择
- **选择方案:** 三层记忆架构设计
- **备选方案:** 单一记忆存储机制
- **选择理由:**
  - 分层管理不同类型和时效的记忆内容
  - 平衡性能和存储成本
  - 支持个性化服务和学习能力
  - 符合Claude Code架构标准

#### 三层记忆架构
**1. 案件级记忆** (Case-Level)
- 位置：`output/[案件编号]/06_日程管理/[案件编号].md`
- 格式：Markdown
- 内容：案件上下文、工作记录、时间线、状态变更、决策历史
- 生命周期：案件全程
- 更新机制：Agent自动更新

**2. 个人级记忆** (Personal-Level)
- 位置：`.claude/memory/` 文件夹
- 格式：Markdown
- 内容：律师偏好、工作习惯、个性化设置、常用模板、效率优化
- 生命周期：长期保持
- 更新机制：人工审核后修改

**3. 系统级记忆** (System-Level)
- 位置：根目录 `claude.md` 文件
- 格式：Markdown
- 内容：全局配置、系统规则、法律知识库、共享经验、最佳实践
- 生命周期：永久维护
- 更新机制：人工审核后修改

#### 影响
- ✅ 提升Agent协作效率和智能化水平
- ✅ 支持个性化服务和持续学习
- ✅ 建立知识积累和复用机制
- ⚠️ 需要设计记忆加载和更新机制
- ⚠️ 记忆内容需要质量控制和版本管理

#### 后续行动
- 实施记忆分层系统的具体实现
- 建立记忆质量控制机制
- 开发记忆检索和推荐系统

### 决策 #013 - 文档管理与优化架构升级
**日期:** 2025-11-01
**状态:** 已执行
**决策者:** 文档管理团队

#### 背景
原文档管理结构存在目录过多（9个）、文件分散、命名不统一等问题，影响Agent协作效率和用户体验。需要进行架构优化。

#### 方案选择
- **选择方案:** 整合式目录结构 + 双版本设计
- **备选方案:** 保持现有9个目录结构
- **选择理由:**
  - 减少目录层级，提升可管理性
  - 5个整合目录更符合工作流逻辑
  - YAML+MD双版本设计支持看板数据和工作记录双重需求
  - 统一的命名规范提升一致性

#### 文档管理新架构
**整合后目录结构**:
```
output/[案件编号]/
├── 01_案件分析/              # DocAnalyzer + Strategist输出
├── 02_法律研究/              # IssueIdentifier + Researcher输出
├── 03_证据材料/              # EvidenceAnalyzer输出
├── 04_法律文书/              # Writer输出（12种子类型）
├── 05_综合报告/              # Summarizer + Reporter输出
└── 06_日程管理/              # Scheduler输出
    ├── 日程安排/              # 案件时间线管理
    ├── 工时统计/              # 工作时间记录和报表
    ├── 期限提醒/              # 法定期限预警
    ├── [案件编号].yaml        # 案件管理看板数据
    ├── [案件编号].md          # 案件工作记录
    └── 工作记录模板.md        # 工作记录格式模板
```

**双版本设计**:
- **YAML版本** (`[案件编号].yaml`): 用于看板数据，支持自动化数据提取和汇总
- **MD版本** (`[案件编号].md`): 用于工作记录，支持人类可读和Agent解析

#### 影响
- ✅ 目录数量从9个减少到6个，结构更清晰
- ✅ 符合Agent协作逻辑，提升处理效率
- ✅ 支持跨案件数据汇总和分析
- ✅ 提升用户体验和可维护性
- ⚠️ 需要迁移现有文档和更新相关配置

#### 后续行动
- 实施文档结构迁移
- 更新所有Agent配置中的路径引用
- 建立文档迁移工具和验证机制

### 决策 #014 - 自动化工作流编排系统设计
**日期:** 2025-11-01
**状态:** 已执行
**决策者:** 产品设计团队

#### 背景
用户希望能够"拖入一个文件或描述场景，系统就能自动分析并完成工作"，需要智能的自动化编排系统。

#### 方案选择
- **选择方案:** 基于场景识别的自动化编排系统
- **备选方案:** 手动选择工作流组合
- **选择理由:**
  - 降低使用门槛，提升用户体验
  - 基于法律实务场景设计，覆盖15种常见场景
  - 智能识别文档类型和场景，自动选择最佳工作流
  - 支持一键启动，减少操作复杂度

#### 自动化编排机制
**识别规则**:
- 文档类型识别：起诉状、证据材料、庭审笔录、判决书等
- 场景匹配：被告应诉、新证据质证、庭审后分析等15种场景
- 工作流推荐：基于场景自动选择最佳Agent组合

**15种自动识别场景**:
1. 被告应诉、2. 新证据质证、3. 庭审后分析、4. 判决分析
5. 诉前沟通、6. 诉讼中沟通、7. 原告起诉、8. 委托材料制作
9. 保全申请、10. 上诉材料、11. 法律意见书、12. 律师函
13. 强制执行申请、14. 调解协议、15. 异议申请

#### 影响
- ✅ 显著降低使用门槛，提升用户体验
- ✅ 覆盖诉讼全生命周期的常见场景
- ✅ 提升处理效率和一致性
- ✅ 支持增量更新和上下文继承
- ⚠️ 需要持续优化场景识别准确率
- ⚠️ 复杂案件可能需要人工调整

#### 后续行动
- 完善场景识别算法和规则
- 收集用户反馈优化推荐策略
- 建立场景库更新和维护机制

### 决策 #015 - 案件上下文维护机制设计
**日期:** 2025-11-01
**状态:** 已执行
**决策者:** 系统架构师

#### 背景
为每个案件维护独立的上下文信息，确保所有Agent能够了解案件当前状态、工作进度和历史记录，避免重复工作和遗漏。

#### 方案选择
- **选择方案:** 基于YAML+MD双文件的上下文维护机制
- **备选方案:** 单一文件存储所有上下文
- **选择理由:**
  - YAML文件支持结构化数据，便于程序解析
  - MD文件支持人类可读的工作记录
  - 双向同步机制确保数据一致性
  - 支持版本管理和变更历史

#### 上下文信息来源
**主要来源**:
- `[案件编号].yaml` - 案件管理看板数据，包含完整案件信息
- `[案件编号].md` - 工作记录，包含详细的工作历史和进展
- 各工作流输出目录 - 对应的分析结果和文档

**Agent使用指南**:
- **工作前**: 读取案件上下文，了解当前状态
- **工作中**: 保持上下文连贯，复用历史结果
- **工作后**: 更新上下文，同步信息，标记完成

#### 上下文继承规则
- **自动继承**: 案件基本信息、当事人信息、争议焦点、法律研究结果、策略方案
- **增量更新**: 工作记录、期限管理、风险预警、文档状态
- **版本管理**: 重要更新标注版本号，保留关键节点快照

#### 影响
- ✅ 避免重复工作，提升处理效率
- ✅ 保持分析一致性，提升输出质量
- ✅ 支持增量更新，节省token消耗
- ✅ 建立完整的案件档案
- ⚠️ 需要设计高效的上下文加载和更新机制

#### 后续行动
- 实施上下文维护工具和自动化机制
- 建立上下文质量检查和验证
- 开发上下文检索和推荐系统

### 决策 #016 - PDF扫描处理与新材料自动分类系统
**日期:** 2025-11-01
**状态:** 已执行
**决策者:** 技术实现团队

#### 背景
律师经常收到扫描PDF和压缩包文档，需要OCR识别和智能分类。需要建立完整的文档处理和自动分类机制。

#### 方案选择
- **选择方案:** OCR识别 + 双格式输出 + 智能分类系统
- **备选方案:** 仅支持文字PDF，不处理扫描件
- **选择理由:**
  - 适应实际工作场景，扫描件是常见需求
  - OCR技术成熟，可以达到95%+准确率
  - 双格式输出满足不同使用需求
  - 智能分类提升处理效率

#### PDF处理流程
**OCR识别流程**:
1. 文字层提取：检查PDF是否已有文字层
2. OCR识别：扫描件使用OCR技术提取文字
3. 文字精度：确保识别准确率95%+
4. 多语言支持：支持中英文混合识别

**双格式输出**:
- **带文字层的PDF**: 保持原貌，添加可搜索的文字层
- **Markdown文件**: 结构化内容，保持逻辑和元数据

**新材料自动分类指引**:
- 材料归属识别：案号提取、案件匹配、新案件创建
- 材料类型分析：起诉状、证据材料、庭审笔录、判决书等
- 自动放置流程：根据类型智能分配到对应目录

#### 影响
- ✅ 支持扫描PDF文档处理
- ✅ 提升文档处理自动化程度
- ✅ 支持批量处理和ZIP压缩包
- ✅ 智能分类减少人工操作
- ⚠️ OCR识别需要质量检查和人工校对
- ⚠️ 复杂文档类型可能需要特殊处理

#### 后续行动
- 优化OCR识别准确率和速度
- 完善智能分类算法
- 建立文档质量评估机制

### 决策 #017 - Agent输出路径标准化与智能归类
**日期:** 2025-11-01
**状态:** 进行中
**决策者:** 系统架构师

#### 背景
需要为10个Agent定义明确的输出路径，确保文档智能归类和高效管理，支持跨Agent协作和数据传递。

#### 方案选择
- **选择方案:** 基于工作流逻辑的标准化路径设计
- **备选方案:** 统一输出到单一目录
- **选择理由:**
  - 按工作流逻辑分类，符合用户思维模型
  - 支持文档类型精细化分类（如Writer的12种文书类型）
  - 便于文档检索和管理
  - 支持自动化处理和监控

#### 标准化输出路径
**10个Agent输出路径**:
- **DocAnalyzer** → `01_案件分析/`
- **Strategist** → `01_案件分析/`
- **IssueIdentifier** → `02_法律研究/`
- **Researcher** → `02_法律研究/`
- **EvidenceAnalyzer** → `03_证据材料/`
- **Writer** → `04_法律文书/[具体文书类型]/` (12种子类型)
- **Summarizer** → `05_综合报告/`
- **Reporter** → `05_综合报告/`
- **Scheduler** → `06_日程管理/`
- **Reviewer** → 按被审查Agent路径输出审查报告

**文档命名规范**:
- 格式：`[日期]_[文档类型]_[版本]`
- 版本管理：初稿/修订稿/最终稿 或 v1.0/v2.0

#### 影响
- ✅ 提升文档组织效率和可管理性
- ✅ 支持智能检索和自动化处理
- ✅ 便于用户快速定位所需文档
- ✅ 支持跨Agent协作和数据传递
- ⚠️ 需要更新所有Agent配置
- ⚠️ 需要迁移现有文档结构

#### 后续行动
- 完成所有Agent的输出路径配置
- 实施文档路径标准化工具
- 建立文档命名验证机制

### 决策 #018 - 案件智能识别与数据总表优化
**日期:** 2025-11-01
**状态:** 进行中
**决策者:** 数据架构团队

#### 背景
需要实现案件的自动识别、分类和数据管理，支持多案件并行处理和数据聚合分析，建立可视化的案件管理看板。

#### 方案选择
- **选择方案:** 智能识别算法 + YAML数据总表 + 可视化看板
- **备选方案:** 手动案件管理和数据录入
- **选择理由:**
  - 自动化减少人工操作和错误
  - 智能识别提升处理速度和准确性
  - 数据总表支持多案件聚合分析
  - 可视化看板提升管理效率

#### 智能识别系统
**案号识别算法**:
- 正则表达式：`[YYYY]省[城市]民初/行初/刑初[序号]号`
- 支持多种案号格式
- 提取关键信息：年份、地区、案件类型、序号

**案件匹配机制**:
- 检查是否存在相同案号的案件目录
- 新案件自动创建目录结构和模板文件
- 多案件文件批量处理和智能分配

**冲突检测机制**:
- 检测重复案号和重复文档
- 提示用户手动确认
- 提供合并或覆盖选项

#### YAML数据总表设计
**统一数据结构**:
- 基础信息：案件编号、性质、当前状态、案件阶段
- 进度信息：已完成、正在进行、待开始工作
- 工时统计：目标vs实际、分类统计、月度汇总
- 期限管理：法定期限计算、预警机制
- 风险提示：期限风险、证据风险、策略风险

**数据看板功能**:
- 案件概览仪表板
- 工时统计图表
- 期限风险预警
- 跨案件数据汇总

#### 影响
- ✅ 显著提升案件管理效率
- ✅ 支持多案件并行处理
- ✅ 实现数据驱动的案件管理
- ✅ 提供可视化决策支持
- ⚠️ 需要复杂的算法和数据结构设计
- ⚠️ 数据质量依赖于识别准确率

#### 后续行动
- 完成智能识别算法实现
- 开发数据看板和可视化工具
- 建立数据验证和质量控制机制

---

> **最后更新**: 2025-11-01
> **决策总数**: 18个
> **已执行**: 16个
> **进行中**: 2个
> **待验证**: 0个
